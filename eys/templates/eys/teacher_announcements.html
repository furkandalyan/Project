{% extends "eys/base.html" %}

{% block content %}
<div style="display:flex; justify-content:space-between; align-items:flex-end; flex-wrap:wrap; gap:15px; margin-bottom:25px;">
    <div>
        <p style="margin:0; color:#9a9a9a;">OluÅŸturduÄŸun tÃ¼m duyurularÄ± buradan yÃ¶net</p>
        <h1 style="margin:5px 0 0 0;">ğŸ“£ DuyurularÄ±m</h1>
    </div>
    <div style="display:flex; align-items:center; gap:12px;">
        <div style="color:#555; font-size:14px;">Toplam {{ total_count }} duyuru</div>
        <a href="{% url 'teacher_create_announcement' %}" style="background:#1db954; color:white; padding:10px 18px; border-radius:10px; text-decoration:none; font-weight:600;">Yeni Duyuru OluÅŸtur</a>
    </div>
</div>

<div style="background:white; border-radius:18px; padding:28px; box-shadow:0 20px 45px rgba(0,0,0,0.08);">
    {% if timeline %}
        <div style="position:relative; padding-left:25px;">
            <div style="position:absolute; left:10px; top:0; bottom:0; width:2px; background:linear-gradient(180deg, #1db954, #bee9cd);"></div>
            {% for group in timeline %}
                <div style="margin-bottom:30px;">
                    <div style="margin-bottom:16px; font-weight:600; color:#1db954;">{{ group.date_label }}</div>
                    {% for item in group.items %}
                        <div style="display:flex; gap:15px; margin-bottom:18px;">
                            <div style="width:42px; height:42px; border-radius:50%; background:#f0f0f0; color:#333; display:flex; align-items:center; justify-content:center; font-weight:600;">
                                {% if item.pinned %}ğŸ“Œ{% else %}ğŸ“£{% endif %}
                            </div>
                            <div style="flex:1;">
                                <div style="display:flex; justify-content:space-between; align-items:center; gap:10px;">
                                    <div>
                                        <h3 style="margin:0;">{{ item.title }}</h3>
                                        <p style="margin:4px 0; color:#666; font-size:13px;">{{ item.course_label }}</p>
                                    </div>
                                    <span style="color:#999; font-size:13px;">{{ item.timestamp }}</span>
                                </div>
                                <div style="background:#f8f8f8; padding:14px 16px; border-radius:12px; margin-top:10px;">
                                    <div style="margin:0; white-space:pre-line;">{{ item.body|safe }}</div>
                                    {% if item.attachment %}
                                        <a href="{{ item.attachment.url }}" target="_blank" style="display: inline-block; margin-top: 10px; font-size: 13px; color: #2459c3; text-decoration: none; font-weight: 600;">ğŸ“ Eki Ä°ndir</a>
                                    {% endif %}
                                </div>
                                <div style="margin-top: 12px; display: flex; gap: 12px; align-items: center;">
                                    <a href="{% url 'announcement_detail' item.id %}" style="font-size: 13px; color: #1db954; text-decoration: none; font-weight: 600;">Yorumlar</a>
                                    <a href="{% url 'edit_announcement' item.id %}" style="font-size: 13px; color: #2459c3; text-decoration: none; font-weight: 600;">DÃ¼zenle</a>
                                    <a href="{% url 'delete_announcement' item.id %}" style="font-size: 13px; color: #d9534f; text-decoration: none; font-weight: 600;">Sil</a>
                                    {% if item.pinned %}
                                        <span style="background:#fff0da; color:#b86a00; padding:4px 10px; border-radius:999px; font-size:12px; font-weight: 500;">SabitlenmiÅŸ</span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align:center; color:#a0a0a0; padding:60px 0;">
            HenÃ¼z hiÃ§ duyuru oluÅŸturmadÄ±n. "Yeni Duyuru OluÅŸtur" butonuna tÄ±klayarak ilk duyurunu paylaÅŸabilirsin.
        </div>
    {% endif %}
</div>
{% endblock %}
