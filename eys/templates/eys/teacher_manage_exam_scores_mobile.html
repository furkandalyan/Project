{% extends "eys/base.html" %}

{% block content %}
<div style="max-width:820px; margin:0 auto; display:flex; flex-direction:column; gap:16px;">
    <div style="background:linear-gradient(120deg,#0f5132,#1db954); color:white; border-radius:16px; padding:18px 20px; box-shadow:0 18px 45px rgba(0,0,0,0.18);">
        <p style="margin:0; letter-spacing:0.08em; text-transform:uppercase; font-size:11px; opacity:0.85;">Mobil Not Girisi</p>
        <h2 style="margin:6px 0 0 0;">{{ exam.course.code }} - {{ exam.name }}</h2>
        <p style="margin:6px 0 0 0; opacity:0.85;">Basit ekran: sadece not gir ve kaydet.</p>
    </div>

    <form method="POST" style="background:white; border-radius:16px; padding:16px; box-shadow:0 14px 36px rgba(0,0,0,0.08); display:flex; flex-direction:column; gap:12px;">
        {% csrf_token %}
        {% for row in student_rows %}
            {% with student=row.student result=row.result %}
            <div style="display:flex; flex-direction:column; gap:6px; padding:12px; border:1px solid #eef0f4; border-radius:12px;">
                <div style="display:flex; justify-content:space-between; align-items:center; gap:8px;">
                    <div>
                        <strong style="display:block;">{{ student.get_full_name|default:student.username }}</strong>
                        <span style="font-size:12px; color:#94a3b8;">{{ student.username }}</span>
                    </div>
                    <input type="number" step="0.01" min="0" max="100" name="score_{{ student.id }}" value="{% if result %}{{ result.score }}{% endif %}"
                           placeholder="0-100"
                           style="width:110px; padding:10px; border-radius:10px; border:1px solid #e2e8f0; text-align:center;">
                </div>
                <textarea name="feedback_{{ student.id }}" rows="2" placeholder="Geri bildirim (opsiyonel)"
                          style="width:100%; padding:10px; border-radius:10px; border:1px solid #e2e8f0;">{% if result %}{{ result.feedback }}{% endif %}</textarea>
            </div>
            {% endwith %}
        {% empty %}
            <div style="padding:16px; text-align:center; color:#94a3b8;">Ogrenci yok.</div>
        {% endfor %}
        <button type="submit"
                style="padding:12px 16px; border:none; border-radius:12px; background:#1db954; color:white; font-weight:600;">
            Notlari Kaydet
        </button>
    </form>
</div>
{% endblock %}
